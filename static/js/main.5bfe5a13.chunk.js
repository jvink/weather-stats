(this["webpackJsonpweather-stats"]=this["webpackJsonpweather-stats"]||[]).push([[0],{125:function(e,t,a){e.exports=a(189)},187:function(e,t,a){},189:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(10),o=a.n(c),l=a(51),i=a(36),s=a(37),m=a.n(s),u=a(15),f=a(193),h=a(192),p=a(8),d=a.n(p),E=h.a.RangePicker;var b=function(){var e,t=Object(n.useState)({meta:void 0,data:[]}),a=Object(u.a)(t,2),c=a[0],o=a[1],i=Object(n.useState)(["month","month"]),s=Object(u.a)(i,2),h=s[0],p=s[1],b=Object(n.useState)([]),v=Object(u.a)(b,2),g=v[0],j=v[1],O=Object(f.a)();return Object(n.useEffect)((function(){if(!O.loading&&!O.error){!function(){var e,t;m.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,m.a.awrap(fetch("https://api.meteostat.net/v1/stations/nearby?lat=".concat(O.latitude,"&lon=").concat(O.longitude,"&limit=5&key=dPTiJZzl")));case 2:return e=a.sent,a.next=5,m.a.awrap(e.json());case 5:t=a.sent,o(t);case 7:case"end":return a.stop()}}))}()}}),[O]),r.a.createElement("div",{style:{display:"flex",height:"100%",justifyContent:"center",alignItems:"center"}},1===(null===(e=O.error)||void 0===e?void 0:e.code)&&r.a.createElement("span",null,"Please allow geolocation"),g.length>0&&O.loading&&r.a.createElement("span",null,"Loading..."),r.a.createElement("div",{style:{display:"flex",flexDirection:"column"}},r.a.createElement("div",null,r.a.createElement("h2",null,0===g.length?"Choose months:":"Pick a weather station:")),r.a.createElement("div",{style:{marginBottom:"1em"}},g.length>0&&c.data.map((function(e){return r.a.createElement("div",{key:e.id},r.a.createElement(l.b,{to:"weather/".concat(e.id).concat(0===g.length?"":"?from=".concat(d()(g[0]).toISOString(),"&until=").concat(d()(g[1]).toISOString()))},e.name," (",e.distance," km.)"))}))),r.a.createElement(E,{autoFocus:!0,defaultPickerValue:[d()("01-2010","MM-YYYY"),d()("01-2015","MM-YYYY")],placeholder:["Start month","End month"],format:"MM-YYYY",value:g,mode:h,onChange:function(e){j(e)},onPanelChange:function(e,t){j(e),p(["date"===t[0]?"month":t[0],"date"===t[1]?"month":t[1]])}})))},v=a(17),g=a(118),j=a(92);var O=function(e){var t=e.z,a=e.i,c=e.j,o=e.color,l=Object(n.useRef)(),i=Object(n.useState)(!1),s=Object(u.a)(i,2),m=s[0],f=s[1],h=Object(j.b)({scale:m?[2,2,1]:[1,1,1]});return null!==t.temperature_mean?r.a.createElement(j.a.mesh,{scale:h.scale,ref:l,key:c,position:[a/2,c/-4,t.temperature_mean/40],onPointerOver:function(){f(!0),setTimeout((function(){f(!1)}),1e3)}},m&&r.a.createElement(v.b,null,r.a.createElement("span",{style:{fontSize:8,marginTop:c/-4}},t.temperature_mean)),r.a.createElement("meshBasicMaterial",{attach:"material",color:o}),r.a.createElement("boxBufferGeometry",{attach:"geometry",args:[.1,.1,t.temperature_mean/20]})):r.a.createElement(r.a.Fragment,null)},y=a(123),Y=a.n(y)()({colormap:"jet",nshades:30,format:"hex",alpha:1});var w=function(e){var t=e.m,a=e.i,c=Object(n.useRef)();return Object(n.useEffect)((function(){c.current.rotation.x=Math.PI/180*270}),[]),r.a.createElement("group",{key:a},0===a&&t.map((function(e,t){return r.a.createElement(v.b,{key:t,position:[-.2,0,t/4]},e.month.split("-")[1])})),r.a.createElement("group",{ref:c,position:[a/20,0,0]},r.a.createElement(v.b,{position:[a/2,.4,0]},t[0].month.split("-")[0]),t.map((function(e,t){return r.a.createElement(O,{key:t,i:a,j:t,z:e,color:Y[Math.round(e.temperature_mean)+5]})}))))};Object(v.e)({OrbitControls:g.a});var k=function(e){var t=Object(v.h)(),a=t.gl,c=t.camera,o=Object(n.useRef)();return Object(v.g)((function(){return o.current.update()})),r.a.createElement("orbitControls",Object.assign({ref:o,args:[c,a.domElement]},e))};var x=function(){var e=Object(i.f)(),t=new URLSearchParams(e.search),a=d()(t.get("from")).format("YYYY-MM")||void 0,c=d()(t.get("until")).format("YYYY-MM")||void 0,o=Object(i.g)().params.stationId,l=Object(n.useState)({meta:void 0,data:[]}),s=Object(u.a)(l,2),f=s[0],h=s[1],p=[];Object(n.useEffect)((function(){if(o){!function(){var e,t;m.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,m.a.awrap(fetch("https://api.meteostat.net/v1/history/monthly?station=".concat(o,"&start=").concat(a,"&end=").concat(c,"&key=dPTiJZzl")));case 2:return e=n.sent,n.next=5,m.a.awrap(e.json());case 5:t=n.sent,h(t);case 7:case"end":return n.stop()}}))}()}}),[a,c,o]);for(var E=[],b=0,g=f.data.length;b<g;b+=12)E=f.data.slice(b,b+12),p.push(E);return r.a.createElement(v.a,{camera:{position:[0,4,0],fov:50}},r.a.createElement(k,{enablePan:!0,enableZoom:!0,rotateSpeed:1}),p.map((function(e,t){return r.a.createElement(w,{m:e,i:t,key:t})})))};var M=function(){return r.a.createElement(l.a,null,r.a.createElement(i.c,null,r.a.createElement(i.a,{path:"/weather/:stationId"},r.a.createElement(x,null)),r.a.createElement(i.a,{path:"/"},r.a.createElement(b,null))))};a(187),a(188);o.a.render(r.a.createElement((function(){return r.a.createElement("div",{style:{height:"100%"}},r.a.createElement(M,null))}),null),document.getElementById("root"))}},[[125,1,2]]]);
//# sourceMappingURL=main.5bfe5a13.chunk.js.map